{"version":3,"sources":["webpack:///./src/app/incidents/data-filter.pipe.ts","webpack:///./src/app/incidents/incidents.routing.ts","webpack:///./src/app/incidents/incidents.component.css","webpack:///./src/app/incidents/incidents.component.html","webpack:///./src/app/incidents/incidents.module.ts","webpack:///./~/css-loader/lib/css-base.js?da04**","webpack:///./src/app/incidents/incidents.component.ts"],"names":[],"mappings":"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","file":"7.chunk.js","sourcesContent":["import * as _ from \"lodash\";\r\nimport {Pipe, PipeTransform} from \"@angular/core\";\r\n//declare var _:any;\r\n@Pipe({\r\n    name: \"dataFilter\"\r\n})\r\nexport class DataFilterPipe implements PipeTransform {\r\n\r\n    public transform(value, keys: string, term: string) {\r\n\r\n    if (!term) return value;\r\n    return (value || []).filter((item) => keys.split(',').some(key => item.hasOwnProperty(key) && new RegExp(term, 'gi').test(item[key])));\r\n\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidents/data-filter.pipe.ts","import { Routes } from '@angular/router';\r\n\r\nimport { IncidentsComponent } from './incidents.component';\r\n\r\nexport const IncidentsRoutes: Routes = [\r\n    {\r\n\r\n      path: '',\r\n      children: [ {\r\n        path: '',\r\n        component: IncidentsComponent\r\n    }]\r\n}\r\n];\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidents/incidents.routing.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidents/incidents.component.css\n// module id = 1148\n// module chunks = 7","module.exports = \"<div class=\\\"main-content\\\">\\r\\n  <div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"card\\\">\\r\\n          <div class=\\\"card-header card-header-icon\\\" data-background-color=\\\"blue-grey\\\">\\r\\n            <i class=\\\"material-icons\\\">chat</i>\\r\\n          </div>\\r\\n          <div class=\\\"card-content\\\">\\r\\n            <h4 class=\\\"card-title\\\">Incident Management</h4>\\r\\n\\r\\n<!-- =========================     Toolbar Icons (Begin)     ========================= -->\\r\\n            <div class=\\\"toolbar\\\">\\r\\n              <!-- Capture Button (Begin) -->\\r\\n              <a href=\\\"forms/addincidents\\\" id=\\\"addincidentsId\\\">\\r\\n                <button class=\\\"btn btn-primary btn-round btn-fab btn-fab-mini\\\" rel=\\\"tooltip\\\" title=\\\"Capture a new incident\\\" style=\\\"margin-right: 4px;\\\">\\r\\n                  <i class=\\\"material-icons\\\">add</i>\\r\\n                </button>\\r\\n              </a>\\r\\n              <!-- Capture Button (End) -->\\r\\n\\r\\n              <!-- Search Button (Begin) -->\\r\\n              <button class=\\\"btn btn-primary btn-round btn-fab btn-fab-mini\\\" rel=\\\"tooltip\\\" title=\\\"Search incident\\\" id=\\\"btn-filter\\\" (click)=\\\"showFilter();\\\" value=\\\"on\\\">\\r\\n                <i class=\\\"material-icons\\\">search</i>\\r\\n              </button>\\r\\n              <!-- Search Button (End) -->\\r\\n\\r\\n              <!-- Export Button (Begin) -->\\r\\n\\r\\n                <button class=\\\"btn btn-primary btn-round btn-fab btn-fab-mini\\\" rel=\\\"tooltip\\\" title=\\\"Export to Excel\\\" (click)=\\\"tableToExcel('datatables', 'Incident Report')\\\" value=\\\"Export to Excel\\\" style=\\\"margin-left: 4px;\\\">\\r\\n                  <i class=\\\"material-icons\\\">file_download</i>\\r\\n                </button>\\r\\n\\r\\n              <!-- Export Button (End) -->\\r\\n            </div>\\r\\n<!-- =========================     Toolbar Icons (End)     ========================= -->\\r\\n\\r\\n<!-- =========================     Search Bar (Begin)      ========================= -->\\r\\n            <div id=\\\"search\\\">\\r\\n              <div class=\\\"col-sm-6\\\">\\r\\n                <div class=\\\"form-group label-floating\\\">\\r\\n                  <label class=\\\"control-label\\\">Search Records</label>\\r\\n                  <input type=\\\"text\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"filterQuery\\\" />\\r\\n                  <span class=\\\"help-block\\\">Type here to search</span>\\r\\n                  <br>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n<!-- =========================     Search Bar (End)     ========================= -->\\r\\n\\r\\n<!-- =========================     Table (Begin)     ========================= -->\\r\\n            <div class=\\\"col-sm-12\\\">\\r\\n              <div class=\\\"material-datatables table-responsive\\\">\\r\\n                <table class=\\\"table table-striped table-no-bordered table-hover\\\" id=\\\"datatables\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"width:100%\\\" [mfData]=\\\"data | dataFilter:'refNumber,reportedOn,capturedBy':filterQuery\\\" #mf=\\\"mfDataTable\\\"\\r\\n                [mfRowsOnPage]=\\\"rowsOnPage\\\" [(mfSortBy)]=\\\"sortBy\\\" [(mfSortOrder)]=\\\"sortOrder\\\">\\r\\n                  <thead>\\r\\n                    <tr>\\r\\n                      <th style=\\\"display:none;\\\"></th>\\r\\n                      <th>Ref Number</th>\\r\\n                      <th>Category</th>\\r\\n                      <th>Type</th>\\r\\n                      <th>Region</th>\\r\\n                      <th>Date</th>\\r\\n                      <th>Status</th>\\r\\n                      <th>Operator</th>\\r\\n                      <th class=\\\"disabled-sorting text-right\\\">Actions</th>\\r\\n                    </tr>\\r\\n                  </thead>\\r\\n\\r\\n                  <tbody>\\r\\n                    <tr *ngFor=\\\"let type of mf.data\\\">\\r\\n                      <td style=\\\"display:none;\\\">{{type.id}}</td>\\r\\n                      <td>{{type.refNumber}}</td>\\r\\n                      <td>{{type.incident_category.name}}</td>\\r\\n                      <td>{{type.incident_subcategory.name}}</td>\\r\\n                      <td>{{type.incident_region.name}}</td>\\r\\n                      <td>{{type.reportedOn}}</td>\\r\\n                      <td>{{type.incident_status.name}}</td>\\r\\n                      <td>{{type.capturedBy}}</td>\\r\\n                      <td class=\\\"td-actions text-right\\\">\\r\\n                        <a href=\\\"forms/viewincidents\\\">\\r\\n                          <button type=\\\"button\\\" (click)=\\\"Onclick();\\\"  rel=\\\"tooltip\\\" title=\\\"View incident details\\\" class=\\\"btn btn-primary\\\">\\r\\n                            <i class=\\\"material-icons\\\">visibility</i>\\r\\n                          </button>\\r\\n                        </a>\\r\\n\\r\\n                        <a href=\\\"forms/changestatus\\\">\\r\\n                          <button type=\\\"button\\\" rel=\\\"tooltip\\\" (click)=\\\"Onclick();\\\" id=\\\"update\\\" title=\\\"Update incident status\\\" class=\\\"btn btn-warning\\\">\\r\\n                            <i class=\\\"material-icons\\\">update</i>\\r\\n                          </button>\\r\\n                        </a>\\r\\n                      </td>\\r\\n                    </tr>\\r\\n                  </tbody>\\r\\n\\r\\n                  <tfoot id=\\\"form-filter\\\">\\r\\n                    <label id=\\\"results\\\">No Incidents Data at the moment</label>\\r\\n                    <tr>\\r\\n                     <th style=\\\"display:none;\\\"></th>\\r\\n                      <th>Ref Number</th>\\r\\n                      <th>Category</th>\\r\\n                      <th>Type</th>\\r\\n                      <th>Region</th>\\r\\n                      <th>Date</th>\\r\\n                      <th>Status</th>\\r\\n                      <th>Operator</th>\\r\\n                      <th class=\\\"text-right\\\">Actions</th>\\r\\n                    </tr>\\r\\n                    <br>\\r\\n                    <tr>\\r\\n                      <td colspan=\\\"12\\\">\\r\\n\\r\\n                        <mfBootstrapPaginator [rowsOnPageSet]=\\\"[10,25,50,100]\\\"></mfBootstrapPaginator>\\r\\n\\r\\n                      </td>\\r\\n                    </tr>\\r\\n                    <tr>\\r\\n                      <td colspan=\\\"12\\\" style=\\\"align-items: center\\\">\\r\\n\\r\\n                        <button type=\\\"button\\\" (click)=\\\"getIncidentsWithNext()\\\"  rel=\\\"tooltip\\\" title=\\\"View more incident\\\" class=\\\"btn btn-primary\\\">\\r\\n                          View More\\r\\n                        </button>\\r\\n\\r\\n                      </td>\\r\\n                    </tr>\\r\\n                  </tfoot>\\r\\n                </table>\\r\\n              </div>\\r\\n            </div>\\r\\n<!-- =========================     Table (End)     ========================= -->\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!-- <script>\\r\\n\\r\\nfunction timedRefresh(timeoutPeriod) {\\r\\n  setTimeout(\\\"location.reload(true);\\\",timeoutPeriod);\\r\\n}\\r\\n\\r\\nwindow.onload = timedRefresh(100);\\r\\n\\r\\n\\r\\n</script>\\r\\n<script>\\r\\n  alert(\\\"yes\\\");\\r\\ndocument.getElementById(\\\"datatables\\\").addEventListener(\\\"load\\\", myFunction);\\r\\n\\r\\nfunction myFunction() {\\r\\n    location.reload(true);\\r\\n}\\r\\n</script> -->\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidents/incidents.component.html\n// module id = 1184\n// module chunks = 7","import { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DataTableModule } from \"angular2-datatable\";\r\n\r\nimport { IncidentsComponent } from './incidents.component';\r\nimport { IncidentsRoutes } from './incidents.routing';\r\nimport { DataFilterPipe }   from './data-filter.pipe';\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(IncidentsRoutes),\r\n        CommonModule,\r\n        DataTableModule,\r\n        FormsModule\r\n    ],\r\n    declarations: [IncidentsComponent, DataFilterPipe]\r\n})\r\n\r\nexport class IncidentsModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidents/incidents.module.ts","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 907\n// module chunks = 0 3 6 7 8 9 10","import { Component, OnInit } from '@angular/core';\r\nimport { Http, Response,Headers } from '@angular/http';\r\nimport { DataService } from '../app.service';\r\n\r\ndeclare var $:any;\r\ndeclare interface Task {\r\n  title: string;\r\n  checked: boolean;\r\n}\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'app-incidents',\r\n  templateUrl: './incidents.component.html',\r\n  styleUrls: ['./incidents.component.css'],\r\n  providers: [ DataService ]\r\n})\r\nexport class IncidentsComponent implements OnInit\r\n{\r\n\r\n\r\n   public data;\r\n   public selectedIncidentId;\r\n   public selectedIncidentRefNum;\r\n   public selectedIncidentOperator;\r\n   public dataCategory;\r\n   public filterQuery = \"\";\r\n   public rowsOnPage = 10;\r\n   public sortBy = \"reportedOn\";\r\n   public sortOrder = \"desc\";\r\n   public incidentTypes;\r\n   public incidentCategory;\r\n   public loading;\r\n\r\n   constructor(private dataService: DataService)\r\n   {\r\n      this.loading = true;\r\n      // if (window.location.href.indexOf('reload')==-1) {\r\n      //  window.location.replace(window.location.href+'?reload');\r\n      // }\r\n     this.getIncidents();\r\n   }\r\n\r\n    ngOnInit()\r\n    {\r\n\r\n      $(\"#search\").hide();\r\n      $(\"#results\").hide();\r\n\r\n      //$(\"addincidentsId\").show();\r\n      let role = JSON.parse(localStorage.getItem('role'));\r\n      // console.log(\"alertsRole\",role);\r\n\r\n      //if role is equal to communications department then show add button\r\n      if(role ===\"5a93fa58360f060014c2cff1\"){\r\n       $(\"#addincidentsId\").hide();\r\n      }else{\r\n       $(\"#addincidentsId\").show();\r\n      }\r\n    }\r\n\r\n\r\n   \tngAfterViewInit(){\r\n      //  Activate the tooltips\r\n      $('[rel=\"tooltip\"]').tooltip();\r\n    }\r\n\r\n        //Code to pull all incidents from the service\r\n        getIncidents(){\r\n\r\n              this.dataService.getIncidents().subscribe(\r\n                 data =>{\r\n                   this.data = data.json();\r\n                   this.loading = false;\r\n                   console.log(\"data: \",this.data);\r\n                   if(this.data.length == 0) {\r\n                       $(\"#results\").show();\r\n                   } else {\r\n                       $(\"#results\").hide();\r\n                   }\r\n\r\n              });\r\n\r\n        }\r\n        getIncidentsWithNext(){\r\n          let limit:number=10;\r\n          let skip:number=this.data.length;\r\n          this.dataService.getIncidentsWithNext(limit,skip).subscribe(\r\n            data =>{\r\n              this.data = this.data.concat(data.json());\r\n              console.log(\"this.data\",this.data);\r\n              this.loading = false;\r\n              console.log(\"data: \",this.data);\r\n              if(this.data.length == 0) {\r\n                  $(\"#results\").show();\r\n              } else {\r\n                  $(\"#results\").hide();\r\n              }\r\n\r\n         });\r\n        }\r\n\r\n      tableToExcel(table, name){\r\n          let uri = 'data:application/vnd.ms-excel;base64,'\r\n            , template = '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv=\"content-type\" content=\"text/plain; charset=UTF-8\"/></head><body><table>{table}</table></body></html>'\r\n            , base64 = function(s) { return window.btoa(decodeURIComponent(encodeURIComponent(s))) }\r\n            , format = function(s, c) { return s.replace(/{(\\w+)}/g, function(m, p) { return c[p]; }) }\r\n            if (!table.nodeType) table = document.getElementById(table)\r\n            var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}\r\n            window.location.href = uri + base64(format(template, ctx))\r\n        }\r\n\r\n\r\n         showFilter(){\r\n\r\n           if($('#btn-filter').attr(\"value\") == \"on\")\r\n           {\r\n               $('#search').show();\r\n               $('#btn-filter').attr(\"value\",\"off\");\r\n           }else{\r\n               $('#search').hide();\r\n               $('#btn-filter').attr(\"value\",\"on\");\r\n           }\r\n\r\n        }\r\n\r\n\r\n   Onclick(){\r\n\r\n    //picks the selected incident ID\r\n        $('#datatables tr').click(function() {\r\n\r\n            var $row = $(this).closest(\"tr\"),        // Finds the closest row <tr>\r\n                $tds = $row.find(\"td:nth-child(1)\"); // Finds the 1nd <td> element\r\n\r\n            $.each($tds, function() {                // Visits every single <td> element\r\n\r\n              this.selectedIncidentId = $(this).text();\r\n              localStorage.setItem('selectedIncidentId', JSON.stringify(this.selectedIncidentId));\r\n              // console.log(\"selectedIncidentId\", JSON.stringify(this.selectedIncidentId)); // Prints out the text within the <td>\r\n\r\n            });\r\n         });\r\n\r\n         //picks the selected Reference ID\r\n          $('#datatables tr').click(function() {\r\n\r\n            var $row = $(this).closest(\"tr\"),        // Finds the closest row <tr>\r\n                $tds = $row.find(\"td:nth-child(2)\"); // Finds the 2nd <td> element\r\n\r\n            $.each($tds, function() {                // Visits every single <td> element\r\n\r\n              this.selectedIncidentRefNum = $(this).text();\r\n              localStorage.setItem('selectedRefNumber', JSON.stringify(this.selectedIncidentRefNum));\r\n              // console.log(\"selectedRefNumber\", JSON.stringify(this.selectedIncidentRefNum)); // Prints out the text within the <td>\r\n\r\n            });\r\n         });\r\n\r\n         //picks the selected Operator ID\r\n          $('#datatables tr').click(function() {\r\n\r\n            var $row = $(this).closest(\"tr\"),        // Finds the closest row <tr>\r\n                $tds = $row.find(\"td:nth-child(8)\"); // Finds the 8th <td> element\r\n\r\n            $.each($tds, function() {                // Visits every single <td> element\r\n\r\n              this.selectedIncidentOperator = $(this).text();\r\n              localStorage.setItem('selectedIncidentOperator', JSON.stringify(this.selectedIncidentOperator));\r\n            // console.log(\"selectedIncidentOperator\", JSON.stringify(this.selectedIncidentOperator)); // Prints out the text within the <td>\r\n\r\n            });\r\n         });\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidents/incidents.component.ts"],"sourceRoot":""}